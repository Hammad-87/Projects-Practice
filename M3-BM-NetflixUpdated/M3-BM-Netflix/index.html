<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      crossorigin="anonymous"
    />

    <title>Netflix</title>
<!-- CSS -->
    <link rel="stylesheet" type="text/css" href="index.css">
</head>
<body>
    <!-- NavBar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <a class="navbar-brand" href="#">
          <img src="assets/logo.png" style="width: 100px; height: 55px;" />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link font-weight-bold" href="#"
                >Home <span class="sr-only">(current)</span></a
              >
            </li>
            <li class="nav-item active">
              <a class="nav-link font-weight-bold" href="#">TV Shows</a>
            </li>
            <li class="nav-item">
              <a class="nav-link font-weight-bold" href="#">Movies</a>
            </li>
            <li class="nav-item">
              <a class="nav-link font-weight-bold" href="#">Recently Added</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Dropdown
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <div class="dropdown-item" onclick="categories('Action')">Action</div>
                <div class="dropdown-item" onclick="categories('Horror')">Horror</div>
                <div class="dropdown-item" onclick="categories('Romance')">Romance</div>
                <!-- <div class="dropdown-divider"></div> -->
                <!-- <a class="dropdown-item" href="#">Romance</a> -->
              </div>
            </li>
          </ul>
          <div class="d-flex my-3 my-lg-0">
            <i class="fa fa-search icons mr-3"></i>
            <div id="kids">KIDS</div>
            <i class="fa fa-bell icons mx-3"></i>
            <i class="fa fa-user icons mx-3"></i>
          </div>
        </div>
      </nav>
      <!-- NavBar END -->
      <!-- Carousel -->
      <div class="container-fluid position-relative">
        <div
          id="carouselExampleIndicators"
          class="carousel slide"
          data-ride="carousel"
        >
          <ol class="carousel-indicators">
            <li
              data-target="#carouselExampleIndicators"
              data-slide-to="0"
              class="active"
            ></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
          </ol>
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img
                src="./carousel/slide1.jpg"
                class="d-block w-100"
                alt="first slide"
              />
            </div>
            <div class="carousel-item">
              <img
                src="./carousel/slide2.jpg"
                class="d-block w-100"
                alt="second slide"
              />
            </div>
            <div class="carousel-item">
              <img
                src="./carousel/slide3.jpg"
                class="d-block w-100"
                alt="third slide"
              />
            </div>
          </div>
          <a
            class="carousel-control-prev"
            href="#carouselExampleIndicators"
            role="button"
            data-slide="prev"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a
            class="carousel-control-next"
            href="#carouselExampleIndicators"
            role="button"
            data-slide="next"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
        <!-- Carousel End -->
        <!-- Movies -->
        <div class="container-fluid movies-tiles pt-4">
        <div class="title-wrapper">
          <h3>Current Trend</h3>
          <p>I film pi√π popolari</p>
          <a href="#">Esplora</a>
        </div>
        <div class="row tile-row pb-4">

        </div>

      </div>

     
      <script src="./helper.js"></script>
      <script>

const reference = document.querySelector(".row");
const carousel = document.querySelector(".carousel-inner");


        window.onload = async () => {
          
          try {
            let actionMovie = await getMoviesByCategory('Action');
                        
          
          if (actionMovie.length > 0){
            
            actionMovie.forEach((a) => {
            reference.innerHTML +=`
            <div class="strive-card col-4">
            <div class="position-relative" style="overflow: hidden;">
              <img src=${a.imageUrl} alt="" />
              <div class="play-icon gradient">
                <i class="fa fa-play" aria-hidden="true"></i>
              </div>
            </div>
            <div class="infos-container">
              <div class="infos-content">
                <div class="d-flex justify-content-between align-items-center">
                  <span class="font-weight-bold mb-3 link"
                    >${a.name}</span
                  >

                  <span class="plus"
                    ><a href="detail.html?id=${a._id}"><i class="fa fa-plus fa-lg" aria-hidden="true"></i></a></span>
                </div>
                <span class="subtitle mb-1">${a.description}</span>
                <span class="content"
                  >${a.description}
                </span>
                <div class="info-footer mt-2">
                  <span class="time mr-2">1h 30min</span>
                  <span class="mr-3">2019</span
                  ><i
                    class="fa fa-address-card-o fa-lg mr-2"
                    aria-hidden="true"
                  ></i
                  ><i
                    class="fa fa-calendar-check-o fa-lg"
                    aria-hidden="true"
                  ></i>
                </div>
              </div>
            </div>
          </div> ` 
          /* carousel.innerHTML += `
          ` */
                });
            } else {
              eventsDiv.innerHTML = "<h1>No planned events yet</h1>";
            }
          } catch (err) {
            console.log("err", err);
            alert(err);
          }
        }

       const categories = async (category) => {
          reference.innerHTML = ''
       
          let moviesCategories = await getMoviesByCategory(category)
          console.log(moviesCategories);
        
          if (moviesCategories.length > 0){
            moviesCategories.forEach((c) => {
            reference.innerHTML +=`
            <div class="strive-card col-4">
            <div class="position-relative" style="overflow: hidden;">
              <img src=${c.imageUrl} alt="" />
              <div class="play-icon gradient">
                <i class="fa fa-play" aria-hidden="true"></i>
              </div>
            </div>
            <div class="infos-container">
              <div class="infos-content">
                <div class="d-flex justify-content-between align-items-center">
                  <span class="font-weight-bold mb-3 link"
                    >${c.name}</span
                  >

                  <span class="plus"
                    ><a href="detail.html?id=${c._id}"><i class="fa fa-plus fa-lg" aria-hidden="true"></i></a></span>
                </div>
                <span class="subtitle mb-1">${c.description}</span>
                <span class="content"
                  >${c.description}
                </span>
                <div class="info-footer mt-2">
                  <span class="time mr-2">1h 30min</span>
                  <span class="mr-3">2019</span
                  ><i
                    class="fa fa-address-card-o fa-lg mr-2"
                    aria-hidden="true"
                  ></i
                  ><i
                    class="fa fa-calendar-check-o fa-lg"
                    aria-hidden="true"
                  ></i>
                </div>
              </div>
            </div>
          </div> 
                  ` 
                });
            } else {
              eventsDiv.innerHTML = "<h1>No planned events yet</h1>";
            }
        } 
        // Card Flipping function
      /*   let card = document.querySelector('img');
        card.addEventListener( 'click', function() {
          card.classList.toggle('is-flipped');
        }); */
          
      </script>




     <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>
    <!-- fontawesome -->
    <script src="https://kit.fontawesome.com/88e239b1bc.js"></script>
</body>
</html>