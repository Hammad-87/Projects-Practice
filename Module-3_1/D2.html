<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors" />
    <meta name="generator" content="Jekyll v3.8.5" />
    <title>Example Â· Bootstrap</title>
  
    <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/album/" />
  
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
  </head>
  <body>
    <h1>Start from your previous Spotify Exercise.</h1>

    <p>
      The goal of this exercise is to fetch data from the API instead of having
      them "wired up" in the page.
      <a href="#" class="btn btn-primary my-2" onclick="loadData()">Load</a>
    </p>

    <p id="search">
      Generate automatically 3 lists based on the "search API" response
    </p>
    <ul id="list" >
      <li >es.: https://deezerdevs-deezer.p.rapidapi.com/search?q=eminem</li>
      <li>es.: https://deezerdevs-deezer.p.rapidapi.com/search?q=metallica</li>
      <li>es.: https://deezerdevs-deezer.p.rapidapi.com/search?q=behemoth</li>
    </ul>

    <h3>
      Load them during page load, and create the collections based on the API
      response.
    </h3>

    <h4>
      [EXTRA] Make the central part of the page scrollable both horizontally and
      vertically
    </h4>

    <h4>
        [EXTRA] Add a "List albums" button. When pressed, he should create and display a list of albums on the page
    </h4>

    <h4>
        [EXTRA] Add a "Count Unique" button. When pressed, he should log the number of unique albums on the page
    </h4>

    <h4>
      [EXTRA] Add a search button to change the API query
    </h4>
    <img src="" alt="" id="image" width="480">

    <script>
          
      function loadData() {

          fetch("https://deezerdevs-deezer.p.rapidapi.com/search?q=eminem", {
	        "method": "GET",
	      "headers": {
		    "x-rapidapi-host": "deezerdevs-deezer.p.rapidapi.com",
		    "x-rapidapi-key": "575de39080mshf1f9cab8127c63fp1bcad8jsn113d9f3f814b"
        	}
  }).then(response => response.json())
  /* console.log(response) */
  /* .then(
    dataCol => dataCol.data())
    console.log(dataCol) */
   .then(dataColected =>{
   const list = document.getElementById("search")

    dataColected.forEach(user => {
      const listElement = document.createElement('div')
            /*  const textNode = document.createTextNode(user.email)
            listElement.appendChild(textNode)  */
            list.appendChild(listElement)
  })  
})
}

/* function clicked(){
              document.getElementById("fetchSearch").innerHTML=""
              
          let button = document.querySelector("#searchInput").value

        fetch(`https://deezerdevs-deezer.p.rapidapi.com/search?q=${button}`, {
              "method": "GET",
              "headers": {
                "x-rapidapi-host": "deezerdevs-deezer.p.rapidapi.com",
                "x-rapidapi-key": "b0688e745dmsh41b788a14af44c3p1bd80cjsn95f97f3e6443"
              }
            })
            .then(response => response.json()).then(
            data => data.data)
            .then(dataColected =>{
              let reference = document.getElementById("fetchSearch")
              dataColected.forEach(search =>{
                let cardDiv = document.createElement("div")
                cardDiv.classList="card"
                let img = document.createElement("img")
                img.classList="card-img-top"
                let divCardBody = document.createElement("div")
                divCardBody.classList="card-body d-flex justify-content-between flex-column"
                let h6Title = document.createElement("h6")
                h6Title.classList="card-title"
                h6Title.innerText=search.title_short
                let pArtist = document.createElement("p")
                pArtist.innerText="Artist: "+search.artist.name
                let pAlbum = document.createElement("p")
                pAlbum.innerText="Album: "+search.album.title
                let pDuration = document.createElement("p")
                pDuration.innerText="Duration: "+((search.duration)/100)

                img.src=search.album.cover
                
                divCardBody.appendChild(h6Title)
                divCardBody.appendChild(pArtist)
                divCardBody.appendChild(pAlbum)
                divCardBody.appendChild(pDuration)
                cardDiv.appendChild(img)
                cardDiv.appendChild(divCardBody)
                reference.appendChild(cardDiv)
              })
            })
            .catch(err => console.log(err))

        } */

</script>


<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>

    
  </body>
</html>
